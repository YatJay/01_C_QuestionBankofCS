# 09_文件

#### 一、文件指针操作固定

```c
FILE *fp;
fp = fopen("sp.txt", "r/w");

	if (fp == NULL)
	{
		printf("file open error");
		exit(0);//需要#include <stdlib.h>
	}
```

```c
while(!feof(fp)){
		//使用文件指针操作   循环内部查找使用flag标志位，出循环以后再根据标志位进行输出
	}
```

```c
fclose(fp);
```



### 二、文件相关函数操作固定
#### 1.读文件操作固定
##### fscanf()格式化读取文件流

```c
if(fscanf(fp,"%s %s %f %ld", SP.pinming,SP.guige,&SP.danjia,&SP.shuliang)==4){  
	//格式化读取成功后操作
}
else{
	break;//若格式化读取文件失败则跳出循环(即上面的while循环) 
}
```



##### fread()二进制读取文件流

```c
if(fread(SP.pinming,sizeof(SP.pinming),1,fp)==1
	&&fread(SP.guige,sizeof(SP.guige),1,fp)==1
	&&fread(&SP.shuliang,sizeof(long),1,fp)==1
	&&fread(&SP.danjia,sizeof(float),1,fp)==1) {
		//二进制文件读取成功后操作
}
else{
    break;//若格式化读取文件失败则跳出循环(即上面的while循环) 
}
```

```c
if (fread(&SP, sizeof(struct goods), 1, fp) == 1){  
	//二进制文件读取成功后操作
		}
else
{
    break;//若格式化读取文件失败则跳出循环(即上面的while循环) 
}
```



##### 循环遍历文本文件并输出显示固定

```c
 //固定：循环遍历文件使用 本质上是将文本文件看做是字符流，fget()读取，读到什么就输出什么，直到读取到文件末尾 
while ((ch=fgetc(fp))!=EOF){ 
		putchar(ch);
	}
